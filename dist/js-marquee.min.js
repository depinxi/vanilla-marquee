function t(t,s=document){return s.getElementsByClassName(t)}function s(t,s,i){for(let e=0,n=t.length;e<n;e++)s.call(i,t[e],e)}function i(t,s,i,e){t.addEventListener(s,i,e)}function e(t,s,i,e){t.removeEventListener(s,i,e)}function n(t,s){return t.getAttribute(s)}function h(t,s,i){t.setAttribute(s,i)}const a={css3easing:"linear",delayBeforeStart:1e3,direction:"left",duplicated:!1,duration:5e3,gap:20,pauseOnHover:!1,speed:0,startVisible:!1};export default class{constructor(e,h){if(void 0===e)throw new Error("el cannot be undefined");if("string"==typeof e)throw new Error("el cannot be just a selector");if(null===e)throw new Error("el cannot be null");h={...a,...h},this.t=3;for(const t in a){let s=n(e,`data-${a[t]}`);null!==s&&""!==s&&("true"!==s&&"false"!==s||(s=Boolean(s)),h[t]=s)}h.speed&&(h.duration=parseInt(e.clientWidth)/h.speed*1e3),h.gap=h.duplicated?parseInt(h.gap):0,e.innerHTML=`<div class="js-marquee">${e.innerHTML}</div>`;const r=t("js-marquee",e)[0];r.style.marginRight=`${h.gap}px`,r.style.willChange="transform",r.style.float="left",h.duplicated&&e.appendChild(r.cloneNode(!0)),e.innerHTML=`<div style="width:100000px" class="js-marquee-wrapper">${e.innerHTML}</div>`;const o=t("js-marquee-wrapper",e)[0],u="up"===h.direction||"down"===h.direction;if(this.i=o,u){const i=e.clientHeight;this.h=i,function(t,s){t.removeAttribute(s)}(o,"style"),e.style.clientHeight=`${i}px`;const n=t("js-marquee",e),a=n.length-1;s(n,((t,s)=>{t.style.float="none",t.style.marginRight="0px",h.duplicated&&s===a?t.style.marginBottom="0px":t.style.marginBottom=`${h.gap}px`}));const r=parseInt(n[0].clientHeight+h.gap);this.o=el_elHeight,h.startVisible&&!h.duplicated?(this.u=(r+i)/parseInt(i)*h.duration,h.duration=r/parseInt(i)*h.duration):h.duration=r/parseInt(i)/parseInt(i)*h.duration}else{const s=parseInt(t("js-marquee",e)[0].clientWidth+h.gap),i=e.clientWidth;this.p=i,this.l=s,h.startVisible&&!h.duplicated?(this.u=(s+i)/parseInt(i)*h.duration,h.duration=s/parseInt(i)*h.duration):h.duration=(s+parseInt(i))/parseInt(i)*h.duration}h.duplicated&&(h.duration=h.duration/2),this.m=h;const p="marqueeAnimation-"+Math.floor(1e7*Math.random()),l=this.$(p,h.duration/1e3,h.delayBeforeStart/1e3,"infinite");this.v=p,this.g=l,h.duplicated?(u?h.startVisible?this.i.style.transform="translateY(0px)":this.i.style.transform=`translateY(${"up"===h.direction?this.h:-1*(2*this.o-h.gap)}px)`:h.startVisible?this.i.style.transform="translateX(0px)":this.i.style.transform=`translateX(${"left"===h.direction?this.p:-1*(2*this.l-h.gap)}px)`,h.startVisible||(this.t=1)):h.startVisible?this.t=2:u?this.I():this.q(),this.S=e,i(this.S,"pause",this.pause.bind(this)),i(this.S,"resume",this.resume.bind(this)),h.pauseOnHover&&(i(this.S,"mouseover",this.pause.bind(this)),i(this.S,"mouseout",this.resume.bind(this))),this._=()=>{this.j(u),this.S.dispatchEvent(new CustomEvent("finished"))},this.j(u)}$(t="",s=0,i=0,e=""){return`${t} ${s}s ${i}s ${e} ${this.m.css3easing}`}j(e=!1){const n=this.m;if(n.duplicated){if(1===this.t){let t=n.duration;t=e?"up"===n.direction?t+this.h/(this.o/t):2*t:"left"===n.direction?t+this.p/(this.l/t):2*t,this.g=this.$(this.v,t/1e3,n.delayBeforeStart/1e3)}else 2===this.t&&(this.v=`${this.v}0`,this.g=this.$(this.v,n.duration/1e3,0,"infinite"));this.t++}let a="";e?n.duplicated?(this.t>2&&(this.i.style.transform=`translateY(${"up"===n.direction?0:-1*this.o}px)`),a=`translateY(${"up"===n.direction?-1*this.o:0}px)`):n.startVisible?2===this.t?(this.g=_animationStr(this.v,n.duration/1e3,n.delayBeforeStart/1e3),a=`translateY(${"up"===n.direction?-1*this.o:this.h}px)`,this.t++):3===this.t&&(this.v=`${this.v}0`,this.g=_animationStr(this.v,this.u/1e3,0,"infinite"),this.I()):(this.I(),a=`translateY(${"up"===n.direction?-1*this.i.clientHeight:this.h}px)`):n.duplicated?(this.t>2&&(this.i.style.transform=`translateX(${"left"===n.direction?0:-1*this.l}px)`),a=`translateX(${"left"===n.direction?-1*this.l:0}px)`):n.startVisible?2===this.t?(this.g=_animationStr(this.v,n.duration/1e3,n.delayBeforeStart/1e3),a=`translateX(${"left"===n.direction?-1*this.l:this.p}px)`,this.t++):3===this.t&&(this.v=`${this.v}0`,this.g=_animationStr(this.v,n.duration/1e3,0,"infinite"),this.q()):(this.q(),a=`translateX(${"left"===n.direction?-1*this.l:this.h}px)`),this.S.dispatchEvent(new CustomEvent("beforeStarting")),this.i.style.animation=this.g;const r=`@keyframes ${this.v} {\n      100% {\n        transform: ${a};\n      }\n    }`,o=function(t,s=document){return s.querySelectorAll(t)}("style",this.i);if(o.length)o[o.length-1].innerHTML=r;else if(t("marq-wrap-style").length)t("marq-wrap-style")[0].innerHTML=r;else{const t=document.createElement("style");!function(t,...i){function e(t,...s){s.forEach((s=>{t.classList.add(s)}))}void 0===t.length?e(t,...i):s(t,(t=>{e(t,...i)}))}(t,"marq-wrap-style"),t.innerHTML=r,function(t,s=document){return s.querySelector(t)}("head").appendChild(t)}i(this.i,"animationiteration",this.X.bind(this),{once:!0}),i(this.i,"animationend",this._.bind(this),{once:!0}),this.Y,h(this.S,"data-runningStatus","resumed")}X(){this.S.dispatchEvent(new CustomEvent("finished"))}I(){this.i.style.transform=`translateY(${"up"===this.m.direction?this.h:-1*this.o}px)`}q(){this.i.style.transform=`translateX(${"left"===this.m.direction?this.p:-1*this.l}px)`}pause(){this.i.style.animationPlayState="paused",this.Y="paused",h(this.S,"data-runningStatus","paused"),this.S.dispatchEvent(new CustomEvent("paused"))}resume(){this.i.style.animationPlayState="running",this.Y="running",h(this.S,"data-runningStatus","resumed"),this.S.dispatchEvent(new CustomEvent("resumed"))}toggle(){"paused"===this.Y?this.resume():"running"===this.Y&&this.pause()}C(){e(this.S,"pause",this.pause.bind(this)),e(this.S,"resume",this.resume.bind(this)),this.m.pauseOnHover&&(e(this.S,"mouseover",this.pause.bind(this)),e(this.S,"mouseout",this.resume.bind(this))),e(this.i,"animationiteration",this.X.bind(this),{once:!0}),e(this.i,"animationend",this._.bind(this),{once:!0})}}
